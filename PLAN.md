# Degenerates — NBA Betting Analysis System

## Context

Elliott wants an AI-powered NBA betting analysis system built as a project-local Claude Code plugin at `~/degenerates/`. The system operates as a team of specialized handicapping agents that provide the same caliber of research professional sports bettors use — systematic, data-driven, and disciplined. All skills/agents are project-local (not installed globally). Follows the same patterns as the Jacobs Family Office plugin.

**Advisory only** — no sportsbook API integrations, no automated betting, no money movement. Uses WebSearch for real-time data. NBA-only to start, architecture supports adding sports later.

---

## Directory Structure

```
~/degenerates/
├── .claude/
│   ├── settings.json              # Auto-allow WebSearch, WebFetch, Task
│   └── skills/                    # 8 project-local skills
│       ├── picks/SKILL.md         # Daily picks orchestrator (4 parallel agents)
│       ├── props/SKILL.md         # Player props analyst (3 parallel agents)
│       ├── briefing/SKILL.md      # Morning briefing (4 parallel agents)
│       ├── journal/SKILL.md       # Bet logging, settlement, review
│       ├── postmortem/SKILL.md    # Performance analysis (3 parallel agents)
│       ├── model/SKILL.md         # Power ratings manager
│       ├── lookup/SKILL.md        # Quick game lookup (inline, no report)
│       └── onboard/SKILL.md       # Setup wizard (interactive)
├── CLAUDE.md                      # Master plugin config (global rules)
├── .gitignore
├── profile/                       # Bettor profile (generated by /onboard)
│   ├── bankroll.json              # Bankroll, unit size, P&L tracking
│   ├── books.json                 # Sportsbook accounts
│   ├── preferences.json           # Bet types, experience, favorites
│   └── risk-config.json           # Kelly fraction, min edge, max exposure
├── models/
│   ├── config.json                # HCA, rest/travel adjustments, weights
│   └── nba/
│       ├── power-ratings.json     # ORtg, DRtg, net rating, pace per team
│       ├── fair-lines.json        # Model-generated spreads/totals
│       ├── pace-ratings.json      # Pace data + vs-fast/vs-slow splits
│       ├── defensive-ratings.json # Positional defense, scheme notes
│       └── adjustments.json       # Injury impacts, schedule flags
├── reports/
│   ├── picks/daily/               # YYYY-MM-DD.md daily cards
│   ├── props/                     # YYYY-MM-DD-description.md
│   ├── postmortem/                # YYYY-MM-DD-description.md
│   └── model-updates/             # YYYY-MM-DD-description.md
├── briefings/daily/               # YYYY-MM-DD.md morning briefings
├── journal/
│   ├── ledger.json                # Structured bet history (JSON array)
│   ├── entries/                   # YYYY-MM-DD-team-bettype.md per bet
│   └── reviews/                   # YYYY-MM-period.md performance reviews
├── memory/
│   ├── MEMORY.md                  # Master memory
│   ├── lessons-learned.md         # Updated by /journal review + /postmortem
│   ├── sharp-patterns.md          # Which sharp signals are reliable
│   ├── model-accuracy.md          # Calibration tracking
│   └── data-freshness.json        # Last run dates for all skills
└── imports/bet-history/           # Raw bet exports for import
```

---

## 8 Skills — Overview

| Skill | Type | Parallel Agents | Profile Files Read | Output Location | Saves Report? |
|-------|------|----------------|-------------------|-----------------|---------------|
| `/picks` | Orchestrator | 4 (Line Scout, Stat Nerd, Situational, Sharp Tracker) | All profile + all models + memory | `reports/picks/daily/YYYY-MM-DD.md` | Yes |
| `/props` | Orchestrator | 3 (Usage Modeler, Matchup Analyst, Market Scanner) | bankroll, books, risk-config, models | `reports/props/YYYY-MM-DD-desc.md` | Yes |
| `/briefing` | Orchestrator | 4 (Injury Wire, Line Movement, Sharp Action, Schedule Scan) | books, preferences, ledger | `briefings/daily/YYYY-MM-DD.md` | Yes |
| `/journal` | Single-agent | 0 | bankroll, ledger | `journal/entries/` + `journal/ledger.json` | Yes |
| `/postmortem` | Orchestrator | 3 (CLV Tracker, Model Accuracy, Agent Scorer) | ledger, models, memory | `reports/postmortem/YYYY-MM-DD-desc.md` | Yes |
| `/model` | Single-agent | 0 | models/ | `models/nba/` + `reports/model-updates/` | Yes (for updates) |
| `/lookup` | Single-agent | 0 | models, books, risk-config | None (inline) | No |
| `/onboard` | Interactive | 0 | None (creates them) | `profile/` + `models/` + `journal/` + `memory/` | Yes (generates all) |

---

## Detailed Skill Specifications

### 1. `/picks` — Daily Picks Orchestrator (flagship)

**Frontmatter:**
```yaml
---
name: picks
description: Daily Picks Orchestrator. Spawns 4 parallel handicapping agents (Line Scout, Stat Nerd, Situational Analyst, Sharp Tracker) then synthesizes and sizes bets with bankroll logic. Use for full daily NBA slate analysis or specific game picks.
argument-hint: "[date, team, or 'tonight']"
disable-model-invocation: true
---
```

**Before You Begin:**
1. Establish today's date from system context.
2. Read ALL profile files: `profile/bankroll.json`, `profile/books.json`, `profile/preferences.json`, `profile/risk-config.json`
3. Read model files: `models/nba/power-ratings.json`, `models/nba/fair-lines.json`, `models/nba/pace-ratings.json`, `models/nba/defensive-ratings.json`, `models/nba/adjustments.json`
4. Read recent reports from `reports/picks/daily/`, `briefings/daily/`, `journal/entries/`
5. Read memory files from `memory/`
6. Determine the slate: if no argument, analyze tonight's full NBA slate. If a team or date is specified, scope accordingly.

**Parallel Agent Orchestration (4 agents, single message):**

**Agent 1 — Line Scout:**
Using WebSearch (and The Odds API via WebFetch if `ODDS_API_KEY` is available), find current odds for tonight's NBA games across all major sportsbooks (DraftKings, FanDuel, BetMGM, Caesars, Hard Rock, Pinnacle if available). For each game: spread, total, moneyline at each book. Identify best available number for each side. Flag any significant line discrepancies between books (>1 point spread difference or >10 cent ML difference). Identify steam moves (rapid line movement across multiple books simultaneously). Note opening lines vs. current lines. Flag any reverse line movement (line moving opposite to where the majority of bets are). Present as tables with timestamps.

**Agent 2 — Stat Nerd:**
Using WebSearch, research each team playing tonight. For each game, find: team offensive/defensive ratings (last 15 games), pace, home/away splits, ATS record (season, last 20), over/under record, offensive/defensive efficiency vs. opponent style. Compare the model's power ratings (provided) against current performance data. Calculate a fair spread and fair total for each game using the power ratings + HCA (+3.0 base, adjustable) + any adjustments. Flag games where the model's fair line differs from the market by more than 1.5 points (spread) or 2 points (total). Present calculations transparently.

**Agent 3 — Situational Analyst:**
Using WebSearch, research situational factors for tonight's games. For each game: days of rest for each team (0/1/2/3+), travel distance and direction (coast-to-coast, back-to-back away, etc.), injury report (OUT/DOUBTFUL/QUESTIONABLE for each player with impact rating), motivation factors (playoff race, tanking, revenge games, rivalry, schedule spot — trap game, let-down, look-ahead), historical ATS performance in similar rest/travel situations, starting lineup confirmation if available. Flag any games with extreme situational edges (3+ rest advantage, 2nd night of B2B on road, key player out). Present findings per game with impact ratings (STRONG/MODERATE/MINOR/NONE).

**Agent 4 — Sharp Tracker:**
Using WebSearch, research betting market signals for tonight's games. For each game: public betting percentages (if available from Action Network, Pregame.com, or similar), sharp money indicators (large bet alerts, steam moves, reverse line movement), Pinnacle line (considered the sharpest market), line movement timeline (open to current), any known sharp group action or tout consensus. Compare public betting % vs. line movement — where the line moves AGAINST the public is a sharp signal. Flag games with clear sharp/public disagreement. Present as a table per game.

**Synthesis (after all 4 agents return):**
1. **Consensus Check** — Where do multiple agents agree? (model edge + sharp action + favorable situation = strong play)
2. **Conflict Resolution** — Where do agents disagree? (e.g., model likes the over but sharp money is on under). Weigh Stat Nerd and Sharp Tracker most heavily.
3. **Edge Calculation** — For each potential play, calculate: Model Edge = |Fair Line - Market Line|. Only recommend plays where edge exceeds the minimum threshold from `profile/risk-config.json` (default: 2% for sides, 2.5% for totals).
4. **Bankroll Sizing** — For qualifying plays, apply the Kelly Criterion (using the fraction from risk-config, default: quarter-Kelly). Cap at max units per game from risk-config. Check total daily exposure against limits.
5. **Final Card** — Rank plays by edge * confidence. Present the day's betting card.

**Output Format:**
Save to `reports/picks/daily/YYYY-MM-DD.md`:

```markdown
# Daily Picks: [Day of Week], [Full Date]
**Date:** [Today's date]
**Agent:** Picks Orchestrator (Line Scout + Stat Nerd + Situational + Sharp Tracker)
**Prepared for:** Degenerates Betting Analysis
**Slate:** X games tonight
**Current Bankroll:** $X,XXX | **Unit Size:** $XXX

---

## Today's Card

### PLAY 1: [Confidence] Confidence
**[Team] [Spread/Total] [Line]** @ [Book]
| Factor | Assessment |
|--------|------------|
| Model Edge | +X.X% (Fair: X.X, Market: X.X) |
| Sharp Signal | [Aligned/Neutral/Contrary] |
| Situational | [Favorable/Neutral/Unfavorable] — [detail] |
| Line Value | [Best number available / still moving] |
| Public % | [X% on this side / X% on other side] |

**Unit Size:** X.X units ($XXX)
**Risk:** [Primary concern]

[Repeat for each play, ranked by edge]

## Games With No Play
| Game | Reason |
|------|--------|
| [Team vs. Team] | [No edge / conflicting signals / too much uncertainty] |

## Bankroll Summary
| Metric | Value |
|--------|-------|
| Plays Today | X |
| Total Risk | X.X units ($XXX) |
| Daily Exposure | X.X% of bankroll |
| Max Single Bet | X.X units |
| Active Open Bets | X plays ($XXX at risk) |

## Agent Conflict Log
| Game | Agent A Says | Agent B Says | Resolution |
|------|-------------|-------------|------------|

## Key Watch Items
[Injuries to monitor, lines to watch for movement, etc.]

---
*This analysis is generated by an AI betting analysis system for informational and entertainment purposes only. It does not constitute gambling advice. Sports betting involves substantial risk of loss. Never bet more than you can afford to lose. If you or someone you know has a gambling problem, call 1-800-GAMBLER.*
```

**`--fade` flag:** If passed, add a "Fade Case" section for each recommended play.

---

### 2. `/props` — Player Props Analyst

**Frontmatter:**
```yaml
---
name: props
description: Player Props Analyst. Spawns 3 parallel agents (Usage Modeler, Matchup Analyst, Market Scanner) for player prop analysis. Use for analyzing specific player props or scanning tonight's best prop plays.
argument-hint: "<player name, prop type, or 'scan'>"
disable-model-invocation: true
---
```

**Before You Begin:**
1. Establish today's date.
2. Read profile files: `profile/bankroll.json`, `profile/books.json`, `profile/risk-config.json`
3. Read model files: `models/nba/pace-ratings.json`, `models/nba/defensive-ratings.json`
4. Read memory files.
5. Determine scope: specific player (`/props LeBron James points`), specific game (`/props LAL vs BOS`), or full scan (`/props scan`).

**Parallel Agent Orchestration (3 agents):**

**Agent 1 — Usage Modeler:**
Using WebSearch: For target player(s), find season averages, last 10 game logs, usage rate, minutes trend, pace of play, home/away splits, and performance with/without key teammates. Calculate projected stat lines based on expected pace and minutes. Flag any players with significant recent usage changes (teammate injury, trade, coaching change). If scanning, identify players with the highest variance between their projection and the prop line.

**Agent 2 — Matchup Analyst:**
Using WebSearch: For target player(s), find the opposing team's defensive ratings by position. How many points/rebounds/assists do they allow to the player's position (last 15 games)? Individual defender matchup data if available. Pace-up/pace-down game environment (fast = more counting stats). Team defensive scheme (switch-heavy, zone, pack the paint). Flag extreme matchup advantages or disadvantages.

**Agent 3 — Market Scanner:**
Using WebSearch (and The Odds API via WebFetch for structured prop lines if available): Find current prop lines across sportsbooks for target player(s). Identify line discrepancies between books. Note alternate lines and juice differences. Compare prop lines to player projections. Flag props where the line appears materially different from projections. For scans, identify the top 5-8 prop discrepancies across tonight's slate.

**Synthesis:**
1. Combine projected stat line (Agent 1) with matchup modifier (Agent 2) to create an adjusted projection.
2. Compare adjusted projection to market lines (Agent 3) to find edge.
3. Only recommend props with edge above threshold (default: 3% for props, since vig is typically higher).
4. Size using half the normal Kelly fraction (props carry more variance).

**Output:** Save to `reports/props/YYYY-MM-DD-description.md`

Template follows standard report header with: Props Card (each recommended prop with player, stat, line, book, projection, edge, unit size), Matchup Matrix table, and Props to Avoid section for popular props that actually have negative edge.

---

### 3. `/briefing` — Morning Betting Briefing

**Frontmatter:**
```yaml
---
name: briefing
description: Morning Betting Briefing. Spawns 4 parallel agents (Injury Wire, Line Movement, Sharp Action, Schedule Scan) for a concise daily overview of the NBA betting landscape. Use for morning intelligence before analyzing picks.
disable-model-invocation: true
---
```

**Before You Begin:**
1. Establish today's date. This entire skill is date-dependent.
2. Read profile: `profile/books.json`, `profile/preferences.json`
3. Read recent briefings from `briefings/daily/` for continuity.
4. Read open bets from `journal/ledger.json` (games not yet settled).

**Parallel Agent Orchestration (4 agents):**

**Agent 1 — Injury Wire:**
Using WebSearch: Find the official NBA injury report for today's games. For every player listed (OUT, DOUBTFUL, QUESTIONABLE, PROBABLE): team, player, status, injury, impact assessment (1-10 scale based on player importance + replacement quality). Flag any late scratches or upgrades from yesterday. Note which injuries are most impactful for spread and total. If a star is OUT, estimate the point spread impact (e.g., "Giannis OUT typically moves MIL spread by 5-7 points").

**Agent 2 — Line Movement:**
Using WebSearch (and The Odds API via WebFetch if available): For tonight's games, find opening lines (spread, total, ML) and current lines. Calculate movement for each. Flag games with >2 point spread movement or >3 point total movement. Identify which direction the line moved and whether it aligns with public betting or goes against it. Note any key number crossings (e.g., spread crossing through 7, total crossing through 220). Present as a table.

**Agent 3 — Sharp Action:**
Using WebSearch: Find any sharp money indicators for tonight's games. Betting percentage splits (public vs. sharp), steam moves, reverse line movement alerts, Pinnacle line positioning. Which games have the biggest sharp/public disagreement? Any games where sharps are hammering one side? Present as alerts ranked by signal strength.

**Agent 4 — Schedule Scan:**
Using WebSearch: Map tonight's full NBA slate. For each game: tip time, venue, national TV, each team's rest days, last game result, travel distance, back-to-back status, record (overall, home/away, ATS, O/U), current streak (SU and ATS). Flag schedule spots: 2nd night of B2B (especially on road), 3+ days rest, long road trips, pre/post all-star break, last game before break, trap/lookahead spots. Present as one big table sorted by tip time.

**Synthesis:**
After all agents return, compose a concise 5-minute-read briefing. Prioritize what matters: key injuries that move lines, sharp action alignment, and the best schedule spots.

**Output:** Save to `briefings/daily/YYYY-MM-DD.md`:

```markdown
# Morning Briefing: [Day of Week], [Full Date]
**Agent:** Morning Briefing
**Prepared for:** Degenerates Betting Analysis
**Tonight's Slate:** X games

---

## Headline Items
[Top 3 things that matter most today — injuries, sharp moves, etc.]

## Injury Report
| Game | Player | Status | Impact (1-10) | Line Impact |
|------|--------|--------|---------------|-------------|

## Line Movement Tracker
| Game | Open Spread | Current | Move | Open Total | Current | Move | Signal |
|------|------------|---------|------|-----------|---------|------|--------|

## Sharp Action Alerts
| Game | Signal | Direction | Strength | Notes |
|------|--------|-----------|----------|-------|

## Tonight's Slate
| Time (ET) | Away | Home | Spread | Total | Rest (A/H) | B2B? | TV |
|-----------|------|------|--------|-------|------------|------|-----|

## Schedule Edges
[Games with notable situational advantages]

## Open Bets Watch
[Any of your active bets affected by today's news]

## One Sharp Thought
[A single non-obvious insight — not filler]

---
```

---

### 4. `/journal` — Bet Journal

**Frontmatter:**
```yaml
---
name: journal
description: Bet Journal. Logs bets, settles results, tracks CLV, and reviews performance. Use to record bets, mark results, or analyze decision quality.
argument-hint: "<'log', 'settle', 'review', or description>"
disable-model-invocation: true
---
```

**Modes:**

**1. Log a Bet (`/journal log` or `/journal "description"`):**

If description provided, parse it. Use AskUserQuestion to fill gaps:

1. "What type of bet?" — Options: Spread / Total (Over) / Total (Under) / Moneyline / Player Prop / Parlay / Teaser / Live Bet / Other
2. "Which sportsbook?" — Options populated from `profile/books.json`
3. "What are the odds/juice?" — Let user type (e.g., -110, +150)
4. "How many units?" — Let user type
5. "What's the closing line for this market?" — Let user type or "unknown"

Save entry to `journal/entries/YYYY-MM-DD-team-bettype.md` AND append structured record to `journal/ledger.json`.

**Ledger entry structure:**
```json
{
  "id": "2026-02-16-BOS-spread-001",
  "date": "2026-02-16",
  "sport": "NBA",
  "game": "BOS @ MIL",
  "bet_type": "spread",
  "pick": "BOS -3.5",
  "odds": -110,
  "book": "Hard Rock",
  "units": 2.0,
  "dollar_amount": 200,
  "line_at_bet": -3.5,
  "closing_line": null,
  "result": "pending",
  "pnl": null,
  "clv": null,
  "agent_source": "picks",
  "confidence": "HIGH",
  "edge_at_bet": 3.2,
  "notes": "Model fair line BOS -5.0, 2nd night B2B for MIL"
}
```

**2. Settle Results (`/journal settle`):**

Read `journal/ledger.json`, find all "pending" entries. Use WebSearch to find final scores for those games. For each settled bet:
- Update result: "win", "loss", "push"
- Calculate P&L (accounting for juice)
- If closing line was entered: calculate CLV = closing_line - line_at_bet (for spread bets) or implied probability difference (for ML/props)
- Update `profile/bankroll.json` with new balance
- Present settlement summary table

**3. Review Performance (`/journal review` or `/journal review [period]`):**

Read all entries from `journal/ledger.json`. Analyze and save to `journal/reviews/YYYY-MM-period.md`:

```markdown
# Betting Review: [Period]
**Date:** [Today's date]
**Agent:** Bet Journal

---

## Summary Statistics
| Metric | Value |
|--------|-------|
| Total Bets | XX |
| Record | XX-XX-XX (W-L-P) |
| Win Rate | XX.X% |
| Units Won/Lost | +/-XX.X |
| ROI | +/-XX.X% |
| Average Odds | -XXX |
| CLV+ Rate | XX.X% (% of bets that beat the close) |
| Average CLV | +X.X points |

## By Bet Type
| Type | Record | Units | ROI |
|------|--------|-------|-----|

## By Confidence Level
| Level | Record | Units | ROI |
|-------|--------|-------|-----|

## By Agent Source
| Agent | Record | Units | ROI | CLV+ |
|-------|--------|-------|-----|------|

## CLV Analysis
[Are you consistently beating the closing line? CLV+ rate >55% suggests long-term edge]

## Bankroll Trajectory
[Starting bankroll -> current -> high water mark -> max drawdown]

## Behavioral Patterns
- Bet sizing discipline (are you following Kelly recommendations?)
- Tilt detection (clusters of losses followed by bigger bets?)
- Best/worst bet types
- Sharp alignment score (how often are you on the same side as sharps?)

## Lessons Learned
[Key takeaways]
```

Also update `memory/lessons-learned.md`.

**4. Recent Bets (`/journal` with no arguments):**
Display last 10 ledger entries in a table with status. Show current bankroll. Flag any pending bets for tonight.

---

### 5. `/postmortem` — Post-Mortem Analyst

**Frontmatter:**
```yaml
---
name: postmortem
description: Post-Mortem Analyst. Spawns 3 parallel agents (CLV Tracker, Model Accuracy, Agent Scorer) for systematic performance analysis. Use for deep analysis of betting performance over a period.
argument-hint: "[period: 'week', 'month', 'season', or date range]"
disable-model-invocation: true
---
```

**Before You Begin:**
1. Establish today's date.
2. Read `journal/ledger.json` (full bet history).
3. Read `models/nba/power-ratings.json` (current model state).
4. Read `memory/model-accuracy.md` and `memory/lessons-learned.md`.
5. Determine the period being analyzed.

**Parallel Agent Orchestration (3 agents):**

**Agent 1 — CLV Tracker:**
Analyze all settled bets in the period. For each bet where closing line is available: calculate CLV, identify bets with best and worst CLV, calculate CLV+ rate (% of bets beating the close), average CLV, CLV by bet type, CLV by confidence level. CLV is the single most important metric — a bettor who consistently beats the close will be profitable long-term regardless of short-term variance. Flag if CLV+ rate is below 50% (suggests systematic edge erosion).

**Agent 2 — Model Accuracy:**
Compare the model's fair lines (from reports at time of pick) against actual game results. For each game: model spread vs. actual margin, model total vs. actual total. Calculate: Mean Absolute Error (MAE) for spreads and totals, games where model was off by >10 points (identify why), directional accuracy (did the model pick the right side?), calibration (is the model systematically biased toward favorites/underdogs/overs/unders?). Compare model accuracy to the market closing line accuracy. If the model's MAE is worse than the market, the model needs recalibration.

**Agent 3 — Agent Scorer:**
Score each of the 4 handicapping agents (Line Scout, Stat Nerd, Situational Analyst, Sharp Tracker) based on their contributions. For bets where an agent's signal was the primary driver: what was the win rate? Which agent's signals have been most profitable? Are there agents whose signals are consistently wrong (and should be faded)? Rank agents by contribution to P&L. Also score: Was the bankroll sizing appropriate? Did discipline hold (no max bets on low-confidence plays)?

**Synthesis:**
Compile into a comprehensive performance report. The post-mortem should be brutally honest — no sugar-coating losing periods.

**Output:** Save to `reports/postmortem/YYYY-MM-DD-description.md`

**Memory Updates:** Update `memory/model-accuracy.md` with calibration findings. Update `memory/lessons-learned.md` with behavioral insights. Update `memory/sharp-patterns.md` with which sharp signals have been most reliable.

---

### 6. `/model` — Model Manager

**Frontmatter:**
```yaml
---
name: model
description: Model Manager. View, update, or recalibrate NBA power ratings and fair lines. Use to check current ratings, adjust for injuries/trades, or run a full model refresh.
argument-hint: "<'view', 'update', 'refresh', or team name>"
disable-model-invocation: true
---
```

**Modes:**

**1. View (`/model view` or `/model`):**
Read and display `models/nba/power-ratings.json` as a formatted table. Include: Team, ORtg, DRtg, Net Rating, Pace, Record, ATS Record, Last Updated. Sort by Net Rating. Highlight teams whose ratings may be stale (>7 days since update).

**2. Update (`/model update [team]`):**
Using WebSearch, research the specified team's (or all teams') recent performance (last 10-15 games). Calculate updated offensive rating, defensive rating, pace. Apply recency weighting (recent games weighted 2x). Factor in any trades, injuries, or coaching changes. Update `models/nba/power-ratings.json`. Show before/after diff. Also update `models/nba/fair-lines.json` for any games involving updated teams.

**3. Refresh (`/model refresh`):**
Full model recalibration. Using WebSearch, pull current NBA standings, team stats (ORtg, DRtg, pace, net rating) from NBA.com/stats or Basketball-Reference. Rebuild the entire power-ratings.json and fair-lines.json. This should be run weekly or after major trades/injuries.

Update adjustments:
- Home court advantage (league average ~3.0 points, varies by team — some have stronger HCA)
- Altitude adjustment (DEN gets +1.0 additional HCA)
- Rest adjustments: 0 days rest (B2B) = -1.5 points; 3+ days rest = +0.5 points; rest advantage = the difference applied
- Travel adjustments: coast-to-coast = -0.5 points for traveling team
- Injury adjustments: approximate point impact per player based on usage rate and plus/minus data

**4. Team Lookup (`/model [team]`):**
Display the specific team's full profile: power ratings, recent form, schedule, ATS/O-U record, key players and their impact ratings.

**Output (for update/refresh):** Save to `reports/model-updates/YYYY-MM-DD-description.md`

---

### 7. `/lookup` — Quick Game Lookup

**Frontmatter:**
```yaml
---
name: lookup
description: Quick Game Lookup. Fast single-game analysis with no parallel agents and no saved report. Use for a quick take on a specific game or matchup.
argument-hint: "<team vs team or game description>"
disable-model-invocation: true
---
```

**Workflow:**
1. Establish today's date.
2. Read `models/nba/power-ratings.json` and `models/nba/adjustments.json`.
3. Read `profile/books.json` and `profile/risk-config.json`.
4. Using WebSearch: find current lines (spread, total, ML) for the specified game, injury report, rest/schedule situation.
5. Calculate model fair line using power ratings + adjustments.
6. Compare to market. Report edge (or lack thereof).
7. Give a quick, direct take: play or pass, and why.

**Output:** Respond directly in conversation. No file saved.

```markdown
## Quick Look: [Away] @ [Home]
**[Date] | [Time ET] | [Venue]**

| Market | Line | Fair | Edge |
|--------|------|------|------|
| Spread | [X] | [X] | [+/-X] |
| Total | [X] | [X] | [+/-X] |
| ML | [X/X] | [X/X] | [varies] |

**Injuries:** [Key names and status]
**Situation:** [Rest, travel, motivation in 1-2 sentences]
**Sharp Signal:** [If any obvious signal, note it]

**Verdict:** [PLAY: Team Spread -X at Book for X units] or [PASS: No actionable edge]
**Why:** [2-3 sentences]
```

---

### 8. `/onboard` — Onboarding Wizard

**Frontmatter:**
```yaml
---
name: onboard
description: Betting Profile Onboarding. Guided setup of bankroll, sportsbooks, API keys, preferences, and risk configuration. Generates structured data all other agents depend on. Run this first before using any other skill.
argument-hint: "[--update]"
disable-model-invocation: true
---
```

**Flow:**

**Round 1 — Bankroll:**
1. "What is your total betting bankroll? (money set aside specifically for betting, that you can afford to lose entirely)" — Let user type
2. "Is this a fresh bankroll or do you have existing bet history to import?" — Options: Fresh start / I have history to import
3. "What unit size are you comfortable with? (standard is 1-2% of bankroll)" — Options: Conservative (1% of bankroll) / Standard (2% of bankroll) / Aggressive (3% of bankroll) / Custom (let me set it)
4. "What is the maximum number of units you want to risk on a single bet?" — Options: 1 unit / 2 units / 3 units / 5 units (degen mode)

**Round 2 — Sportsbooks:**
1. "Which sportsbooks do you have active accounts with? Select all that apply." — Multi-select: DraftKings / FanDuel / BetMGM / Caesars / Hard Rock / PointsBet / Bet365 / BetRivers / Fanatics / Pinnacle / Circa / Other
2. "Which book is your PRIMARY book (where you place most bets)?" — Options populated from prior answer
3. "Do you have access to any sharp/offshore books (Pinnacle, Circa, BetCRIS, Bookmaker)?" — Options: No / Yes (which ones)
4. "Do you line shop across books before placing bets?" — Options: Always / Sometimes / Rarely / What's line shopping?

**Round 3 — API Keys:**
1. "Do you have an Odds API key from the-odds-api.com? (Free tier gives 500 requests/month for structured odds data)" — Options: Yes, I have one / No, I'll sign up / Skip for now (use WebSearch only)
2. If yes: "Paste your API key" — Let user type (saved to profile, referenced as env var)

**Round 4 — Preferences:**
1. "What bet types do you typically make? Select all that apply." — Multi-select: Spreads / Totals (Over/Under) / Moneylines / Player Props / Game Props / Parlays / Teasers / Live/In-Game Betting / Futures
2. "How many bets per day is your sweet spot?" — Options: 1-2 (selective) / 3-5 (active) / 6-10 (volume) / 10+ (high volume)
3. "What time of day do you usually analyze and place bets?" — Options: Morning (before lines move) / Afternoon / Right before tip / I bet throughout the day
4. "How deep do you want the analysis? More detail vs. faster answers?" — Options: Give me everything (full detail) / Balance of speed and depth / Just the plays, keep it brief

**Round 5 — Risk Configuration:**
1. "Kelly Criterion fraction — how aggressively should we size bets?" — Options: Quarter-Kelly (conservative, recommended) / Third-Kelly (moderate) / Half-Kelly (aggressive) / Full Kelly (mathematically optimal but volatile — NOT recommended)
2. "What's the minimum edge you want before we recommend a bet?" — Options: 1% (low threshold, more action) / 2% (standard) / 3% (selective) / 5% (very selective, few plays)
3. "Maximum daily exposure — what % of bankroll can be at risk on any single day?" — Options: 5% / 10% / 15% / 20%
4. "How do you want to handle losing streaks?" — Options: Stick to the system no matter what / Reduce unit size by 25% after 5-unit drawdown / Reduce by 50% after 10-unit drawdown / I'll decide manually

**Round 6 — NBA Specific:**
1. "How familiar are you with NBA betting?" — Options: Expert (I've been doing this for years) / Intermediate (I know the basics, ATS, totals) / Beginner (teach me as we go)
2. "Any teams you ALWAYS want to see analysis for (your team, etc.)?" — Let user type or skip
3. "Any teams or situations you want to AVOID betting (conflict of interest, bias, etc.)?" — Let user type or skip
4. "Do you want to track player props in addition to game lines?" — Options: Yes, I love props / Only occasionally / No, just game lines

**Phase 2 — Generate Profile Files:**

Generate:
1. `profile/bankroll.json`
2. `profile/books.json`
3. `profile/preferences.json`
4. `profile/risk-config.json`

**Phase 3 — Initialize Model:**

Run a model refresh: Using WebSearch, pull current NBA team stats and build initial power ratings. Generate:
1. `models/nba/power-ratings.json`
2. `models/nba/fair-lines.json`
3. `models/nba/pace-ratings.json`
4. `models/nba/defensive-ratings.json`
5. `models/nba/adjustments.json`
6. `models/config.json`

Initialize empty journal:
1. `journal/ledger.json` (empty array)

Initialize memory:
1. `memory/MEMORY.md`
2. `memory/data-freshness.json`
3. `memory/lessons-learned.md`
4. `memory/sharp-patterns.md`
5. `memory/model-accuracy.md`

**Phase 4 — Summary:**

```markdown
# Onboarding Complete

## Your Betting Profile
**Bankroll:** $X,XXX
**Unit Size:** $XXX (X% of bankroll)
**Max Bet:** X units ($XXX)
**Kelly Fraction:** [Quarter/Third/Half]-Kelly
**Min Edge Threshold:** X%
**Max Daily Exposure:** X%

**Books:** [List]
**Primary Book:** [Name]
**Bet Types:** [List]

**NBA Power Ratings:** Initialized with 30 teams
**Model Last Updated:** [Today]

## Recommended Next Steps
1. Run `/briefing` for today's betting intelligence
2. Run `/picks` to analyze tonight's slate
3. Run `/model view` to see your power ratings
4. Run `/journal log` after placing any bets
5. Run `/postmortem` weekly to track performance

Your betting analysis system is ready. Let's find some edges.
```

**Update Mode (`/onboard --update`):**
Ask: "Which section do you want to update?" — Options: Bankroll (deposit/withdrawal) / Sportsbooks / API Keys / Preferences / Risk configuration / NBA model / Everything (full re-onboard)

---

## CLAUDE.md Key Sections

1. **Mission** — AI-powered NBA betting analysis system, advisory only
2. **Advisory disclaimer** — No bets placed, no API integrations, no financial transactions
3. **Date awareness** — Every report timestamped, odds data must note recency
4. **Profile awareness** — Read profile files before any analysis, redirect to `/onboard` if missing
5. **Report format** — Standard header (Date, Agent, Prepared for), standard recommendation structure (Play, Book, Edge, Confidence, Unit Size, Risk, Correlation)
6. **`--fade` flag** — Argue the other side of every pick (parallels JFO's `--challenge`)
7. **Research standards** — WebSearch for real-time data, cross-reference odds, cite sources, note timestamps
8. **NBA model context** — Power ratings, fair line calculation, edge definition, CLV definition, key numbers
9. **The Odds API usage** — WebFetch endpoint, free tier limits, fallback to WebSearch
10. **Future enhancement: Apify MCP** — Documented path for when WebSearch isn't enough
11. **Disclaimer footer** — Informational/entertainment purposes, gambling helpline
12. **Directory structure** — Map of the project
13. **Available agents** — Table of all 8 skills with descriptions

---

## Key Design Decisions

| Decision | Rationale |
|----------|-----------|
| **Full-detail SKILL.md files** | Match JFO quality: 100-220 lines each, complete output templates, detailed agent prompts, quality standards |
| **Hard Rock as default book** | Elliott's current sportsbook; `/onboard` allows adding more, `/onboard --update` to change |
| **CLV as north-star metric** | Best predictor of long-term profitability; tracked on every bet |
| **Quarter-Kelly default** | Full Kelly is too volatile; conservative default prevents ruin |
| **4 parallel agents in /picks** | Line Scout + Stat Nerd + Situational + Sharp Tracker; Bankroll Manager is math in synthesis, not a separate agent |
| **Dual bet tracking** | `ledger.json` for structured queries + `entries/*.md` for human-readable write-ups |
| **The Odds API (free tier) for Line Scout** | Structured JSON odds from 40+ books via WebFetch. 500 req/month free, covers daily /briefing + /picks. WebSearch fallback for props. Upgrade to $20/mo if system delivers. |
| **Apify MCP as documented backup** | Elliott has Apify account. If WebSearch fails on specific sites (Action Network, prop pages), Apify scrapers can fill the gap. Not wired up day 1 — documented as enhancement path. |
| **WebSearch for everything else** | Stats (BBRef), injuries (ESPN/Rotoworld), sharp signals (Action Network), schedules — all render well as text |
| **NBA-only, sport-extensible** | `models/nba/` pattern allows adding `models/nfl/` etc. later |
| **`--fade` not `--challenge`** | Same concept as JFO, betting-specific language |
| **No weekly-review skill** | Daily cadence matters more; `/briefing` + `/journal review` + `/postmortem` cover it |

---

## Profile System (JSON schemas)

### `profile/bankroll.json`
```json
{
  "initial_bankroll": 5000,
  "current_bankroll": 5000,
  "unit_size": 100,
  "unit_pct": 2.0,
  "high_water_mark": 5000,
  "max_drawdown": 0,
  "max_drawdown_pct": 0,
  "total_wagered": 0,
  "total_won": 0,
  "total_lost": 0,
  "net_pnl": 0,
  "roi_pct": 0,
  "sessions": {
    "current_week": { "start_balance": 5000, "pnl": 0 },
    "current_month": { "start_balance": 5000, "pnl": 0 },
    "current_season": { "start_balance": 5000, "pnl": 0 }
  },
  "last_updated": "2026-02-16",
  "losing_streak_protocol": {
    "type": "reduce_25pct_after_5u",
    "current_streak": 0,
    "is_active": false,
    "adjusted_unit_size": null
  }
}
```

### `profile/books.json`
```json
{
  "accounts": [
    {
      "name": "Hard Rock",
      "short": "HR",
      "is_primary": true,
      "is_sharp": false,
      "bet_types_available": ["spread", "total", "ml", "props", "live", "parlays", "teasers"],
      "notes": ""
    }
  ],
  "has_sharp_book": false,
  "line_shopping_habit": "sometimes",
  "preferred_odds_format": "american"
}
```

### `profile/preferences.json`
```json
{
  "sports": ["NBA"],
  "bet_types": ["spread", "total", "ml", "props"],
  "bets_per_day_target": "3-5",
  "analysis_time": "morning",
  "detail_level": "full",
  "experience_level": "intermediate",
  "favorite_teams": [],
  "avoid_teams": [],
  "avoid_situations": [],
  "track_props": true
}
```

### `profile/risk-config.json`
```json
{
  "kelly_fraction": "quarter",
  "kelly_multiplier": 0.25,
  "min_edge_spread": 2.0,
  "min_edge_total": 2.5,
  "min_edge_ml": 3.0,
  "min_edge_props": 3.0,
  "max_units_per_game": 3,
  "max_daily_exposure_pct": 10,
  "max_correlated_exposure": 5,
  "stale_line_threshold_minutes": 60,
  "losing_streak_protocol": {
    "enabled": true,
    "reduce_25pct_after_units_lost": 5,
    "reduce_50pct_after_units_lost": 10,
    "pause_after_units_lost": 20
  },
  "parlay_rules": {
    "allowed": true,
    "max_legs": 3,
    "max_units": 0.5,
    "correlated_only": true
  }
}
```

---

## Model / Data Architecture

### `models/config.json`
```json
{
  "sport": "NBA",
  "season": "2025-26",
  "home_court_advantage_default": 3.0,
  "altitude_adjustment": { "DEN": 1.0 },
  "rest_adjustments": {
    "b2b_penalty": -1.5,
    "rest_3plus_bonus": 0.5,
    "rest_advantage_applied_as_diff": true
  },
  "travel_adjustments": {
    "coast_to_coast": -0.5,
    "timezone_change_3plus": -0.3
  },
  "recency_weighting": {
    "last_10_games_weight": 2.0,
    "season_weight": 1.0
  },
  "last_full_refresh": null,
  "refresh_interval_days": 7
}
```

### `models/nba/power-ratings.json`
```json
{
  "last_updated": "2026-02-16",
  "ratings": {
    "BOS": {
      "team": "Boston Celtics",
      "ortg": 118.5,
      "drtg": 109.2,
      "net_rating": 9.3,
      "pace": 100.2,
      "record": "40-15",
      "ats_record": "28-27",
      "ou_record": "29-26",
      "home_court_adj": 3.5,
      "last_10": "7-3",
      "trend": "stable",
      "key_injuries": [],
      "last_updated": "2026-02-16"
    }
  }
}
```

### `models/nba/fair-lines.json`
```json
{
  "last_updated": "2026-02-16",
  "games": [
    {
      "date": "2026-02-16",
      "away": "BOS",
      "home": "MIL",
      "fair_spread": -2.5,
      "fair_total": 225.5,
      "hca_applied": 3.0,
      "rest_adj": 0.0,
      "travel_adj": 0.0,
      "injury_adj": 0.0,
      "calculation": "BOS net 9.3 - MIL net 5.1 = 4.2; subtract HCA 3.0 = BOS -1.2; round = BOS -1.5; adjustments: none"
    }
  ]
}
```

### `models/nba/pace-ratings.json`
```json
{
  "last_updated": "2026-02-16",
  "league_average_pace": 99.8,
  "ratings": {
    "BOS": { "pace": 100.2, "vs_fast_teams": 103.1, "vs_slow_teams": 97.8 }
  }
}
```

### `models/nba/defensive-ratings.json`
```json
{
  "last_updated": "2026-02-16",
  "ratings": {
    "BOS": {
      "drtg_overall": 109.2,
      "drtg_vs_pg": 22.5,
      "drtg_vs_sg": 21.8,
      "drtg_vs_sf": 20.1,
      "drtg_vs_pf": 19.5,
      "drtg_vs_c": 18.2,
      "paint_points_allowed": 44.2,
      "three_pt_pct_allowed": 35.1,
      "fast_break_pts_allowed": 12.8,
      "scheme": "switch-heavy, drop coverage on bigs"
    }
  }
}
```

### `models/nba/adjustments.json`
```json
{
  "last_updated": "2026-02-16",
  "injury_impacts": {
    "BOS": [
      { "player": "Kristaps Porzingis", "status": "OUT", "spread_impact": -2.5, "total_impact": -3.0 }
    ]
  },
  "schedule_flags": {
    "2026-02-16": {
      "MIL": { "rest_days": 1, "b2b": false, "travel": "home" },
      "BOS": { "rest_days": 2, "b2b": false, "travel": "road_short" }
    }
  }
}
```

### `journal/ledger.json`
```json
{
  "bets": [],
  "metadata": {
    "total_bets": 0,
    "first_bet_date": null,
    "last_bet_date": null,
    "last_settled_date": null
  }
}
```

### `memory/data-freshness.json`
```json
{
  "last_picks_date": null,
  "last_briefing_date": null,
  "last_model_refresh": null,
  "last_settlement": null,
  "last_postmortem": null,
  "model_staleness_days": null,
  "open_bets_count": 0,
  "pending_settlements": 0
}
```

---

## Data Source Strategy

| Source | What It Provides | Used By | Notes |
|--------|-----------------|---------|-------|
| **The Odds API** (free tier) | Real-time odds from 40+ books as structured JSON (spreads, totals, ML, props) | Line Scout, Market Scanner | WebFetch calls to `api.the-odds-api.com`. API key stored in env var `ODDS_API_KEY`. ~6 req for /briefing+/picks, ~15 for props scan. |
| **WebSearch** | Stats, injuries, schedules, sharp money signals, scores, standings | Stat Nerd, Situational, Sharp Tracker, Injury Wire, Schedule Scan | Default for everything except structured odds. BBRef, ESPN, NBA.com, Action Network, Rotoworld. |
| **Apify MCP** (enhancement path) | Web scraping for JS-heavy pages WebSearch can't parse | Future: sharp money data, detailed prop pages | Elliott has account. Not wired up in Phase 0 — add when WebSearch proves insufficient for specific sources. Document the path in CLAUDE.md. |

**Setup requirement:** User signs up at [the-odds-api.com](https://the-odds-api.com), gets free API key, stores it. `/onboard` will prompt for this.

---

## Build Order

| Phase | What | Key Files |
|-------|------|-----------|
| 0 | Foundation | `CLAUDE.md`, `.claude/settings.json`, `.gitignore`, all directories, `git init` |
| 1 | `/onboard` | `.claude/skills/onboard/SKILL.md` — generates all profile + model files |
| 2 | `/model` | `.claude/skills/model/SKILL.md` — view/update/refresh power ratings |
| 3 | `/lookup` | `.claude/skills/lookup/SKILL.md` — simplest skill, validates fair line calc |
| 4 | `/briefing` | `.claude/skills/briefing/SKILL.md` — first orchestrator, 4 parallel agents |
| 5 | `/picks` | `.claude/skills/picks/SKILL.md` — flagship, 4 parallel agents + synthesis + sizing |
| 6 | `/props` | `.claude/skills/props/SKILL.md` — props specialist, 3 parallel agents |
| 7 | `/journal` | `.claude/skills/journal/SKILL.md` — log/settle/review + ledger.json management |
| 8 | `/postmortem` | `.claude/skills/postmortem/SKILL.md` — 3 parallel agents + memory updates |
| 9 | Polish | End-to-end workflow test: `/briefing` -> `/picks` -> `/journal log` -> `/journal settle` -> `/postmortem` |

---

## Reference Files (patterns to follow)

- **Orchestrator pattern:** `~/Jacobs Family Office/.claude/skills/cio/SKILL.md` — parallel Task spawning, synthesis, output format
- **Multi-mode skill:** `~/Jacobs Family Office/.claude/skills/journal/SKILL.md` — log/review/check modes
- **Interactive onboarding:** `~/Jacobs Family Office/.claude/skills/onboard/SKILL.md` — phased AskUserQuestion rounds
- **Briefing pattern:** `~/Jacobs Family Office/.claude/skills/briefing/SKILL.md` — 4 agents, concise synthesis
- **CLAUDE.md structure:** `~/Jacobs Family Office/CLAUDE.md` — global rules, format standards

---

## Verification

1. `cd ~/degenerates && ls -la` — confirm directory structure
2. Run `/onboard` — verify all profile + model JSON files created correctly
3. Run `/model view` — verify power ratings display
4. Run `/lookup BOS vs MIL` — verify fair line calculation inline
5. Run `/briefing` — verify 4 parallel agents execute, briefing saves
6. Run `/picks` — verify 4 agents, synthesis, sizing, report saves with `--fade`
7. Run `/props scan` — verify 3 agents, prop recommendations
8. Run `/journal log` -> manually settle -> `/journal review` — verify ledger tracking
9. Run `/postmortem` — verify CLV analysis, memory file updates
10. Full daily workflow: `/briefing` -> `/picks` -> `/journal log` -> settle -> `/postmortem`
